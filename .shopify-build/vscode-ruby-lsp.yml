containers:
  default:
    build:
      from: ubuntu-latest
      type: ci-browser
      apt:
        install:
          - libxshmfence1
          - libnss3
          - xvfb
          - libatk1.0-0
          - libatk-bridge2.0-0
          - libdrm2
          - libgtk-3-0
          - libgbm1
          - libasound2

steps:
  - label: Lint
    timeout: 5m
    run:
      - yarn: ~
      - yarn run lint

  - label: Tests
    timeout: 20m
    run:
      - yarn: ~
      - /usr/bin/Xvfb :99 -screen 0 1024x768x24 > /dev/null 2>&1 &
      - yarn run test
    env:
      DISPLAY: ":99.0"
